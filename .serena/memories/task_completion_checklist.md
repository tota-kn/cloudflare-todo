# タスク完了チェックリスト

## 実装完了時の必須チェック項目

### 1. 型チェック
```bash
pnpm typecheck                # 全体の型チェック
```
- バックエンド・フロントエンド両方の型エラーがないこと
- 生成された型定義が正しく反映されていること

### 2. リント・フォーマット
```bash
pnpm b lint                   # バックエンドのリント・フォーマット
pnpm f lint                   # フロントエンドのリント・フォーマット
```
- ESLint ルール違反がないこと
- オニオンアーキテクチャの依存方向が正しいこと
- コードスタイルが統一されていること

### 3. 単体テスト
```bash
pnpm b test:unit              # バックエンド単体テスト
```
- 新規追加・変更したロジックのテストが追加されていること
- すべてのテストが通ること
- カバレッジが適切であること

### 4. API統合テスト
```bash
pnpm b test:api               # API統合テスト
```
- API変更がある場合、対応するBrunoテストが更新されていること
- すべてのAPIエンドポイントが正しく動作すること

### 5. E2Eテスト（必要に応じて）
```bash
pnpm test:e2e                 # E2Eテスト
```
- UI変更がある場合、対応するPlaywrightテストが更新されていること
- 主要なユーザーフローが正しく動作すること

### 6. 型安全性確認
- バックエンドの変更がフロントエンドの型に正しく反映されていること
- Hono RPC クライアントでコンパイルエラーが出ていないこと
- 型ブリッジ（`shared/client.ts`）が適切に更新されていること

### 7. データベースマイグレーション（必要に応じて）
```bash
pnpm b db:migrate             # マイグレーション適用確認
pnpm b db:reset               # テストデータでリセット確認
```
- 新しいマイグレーションファイルが正しく作成されていること
- ローカル・dev・prod環境で適用可能であること

### 8. ビルド確認
```bash
pnpm f build                  # フロントエンドビルド確認
```
- プロダクションビルドでエラーが出ないこと
- 生成された成果物が正常であること

## リリース前の最終確認
1. **ローカル環境での動作確認**: 両方の開発サーバーでの動作テスト
2. **クリーンインストール**: `rm -rf node_modules && pnpm install`での動作確認  
3. **依存関係チェック**: 不要な依存関係が追加されていないか確認
4. **セキュリティチェック**: 機密情報がコードに含まれていないか確認

## 緊急時のロールバック手順
1. **Git revert**: 問題のあるコミットを特定してrevert
2. **DB ロールバック**: 必要に応じてマイグレーションをロールバック
3. **デプロイロールバック**: Cloudflareダッシュボードから以前のデプロイバージョンに戻す